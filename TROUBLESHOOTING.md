# DuckChat å¸¸è§é—®é¢˜è§£ç­”

æœ¬æ–‡æ¡£æ”¶é›†äº† DuckChat ç”¨æˆ·å’Œå¼€å‘è€…å¸¸è§çš„é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025-12-25  
**ç»´æŠ¤è€…**: DuckChat Team

## ğŸš¨ å¿«é€Ÿè¯Šæ–­

### é—®é¢˜åˆ†ç±»
- [ğŸ”§ ç¼–è¯‘é—®é¢˜](#-ç¼–è¯‘é—®é¢˜) - æ„å»ºå’Œç¼–è¯‘ç›¸å…³é”™è¯¯
- [ğŸŒ ç½‘ç»œé—®é¢˜](#-ç½‘ç»œé—®é¢˜) - è¿æ¥å’Œé€šä¿¡ç›¸å…³é”™è¯¯
- [ğŸ’¾ æ•°æ®åº“é—®é¢˜](#-æ•°æ®åº“é—®é¢˜) - æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢ç›¸å…³é”™è¯¯
- [ğŸ–¥ï¸ ç•Œé¢é—®é¢˜](#ï¸-ç•Œé¢é—®é¢˜) - å®¢æˆ·ç«¯UIç›¸å…³é”™è¯¯
- [âš¡ æ€§èƒ½é—®é¢˜](#-æ€§èƒ½é—®é¢˜) - è¿è¡Œæ—¶æ€§èƒ½å’Œèµ„æºé—®é¢˜
- [ğŸ”’ å®‰å…¨é—®é¢˜](#-å®‰å…¨é—®é¢˜) - è®¤è¯å’ŒåŠ å¯†ç›¸å…³é”™è¯¯

---

## ğŸ”§ ç¼–è¯‘é—®é¢˜

### Q: ç¼–è¯‘æ—¶å‡ºç° "ncurses.h: No such file or directory"
**A**: ç¼ºå°‘ ncurses å¼€å‘åº“

**è§£å†³æ–¹æ¡ˆ**:
```bash
# Ubuntu/Debian
sudo apt-get install libncurses5-dev libncursesw5-dev

# CentOS/RHEL
sudo yum install ncurses-devel

# macOS
brew install ncurses
```

### Q: ç¼–è¯‘æ—¶å‡ºç° "sqlite3.h: No such file or directory"
**A**: ç¼ºå°‘ SQLite å¼€å‘åº“

**è§£å†³æ–¹æ¡ˆ**:
```bash
# Ubuntu/Debian
sudo apt-get install libsqlite3-dev

# CentOS/RHEL
sudo yum install sqlite-devel

# macOS
brew install sqlite
```

### Q: ç¼–è¯‘æ—¶å‡ºç° OpenSSL ç›¸å…³é”™è¯¯
**A**: ç¼ºå°‘ OpenSSL å¼€å‘åº“

**è§£å†³æ–¹æ¡ˆ**:
```bash
# Ubuntu/Debian
sudo apt-get install libssl-dev

# CentOS/RHEL
sudo yum install openssl-devel

# macOS
brew install openssl
```

### Q: ç¼–è¯‘æ—¶å‡ºç° "undefined reference to" é”™è¯¯
**A**: é“¾æ¥åº“ç¼ºå¤±æˆ–é“¾æ¥é¡ºåºé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿æ­£ç¡®é“¾æ¥æ‰€æœ‰åº“
g++ -std=c++17 -O2 source.cpp -lsqlite3 -lncurses -lssl -lcrypto -o program
```

### Q: C++17 æ ‡å‡†ä¸æ”¯æŒé”™è¯¯
**A**: ç¼–è¯‘å™¨ç‰ˆæœ¬è¿‡æ—§

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç¼–è¯‘å™¨ç‰ˆæœ¬
g++ --version

# Ubuntu/Debian - å®‰è£…æ–°ç‰ˆæœ¬
sudo apt-get install g++-9

# CentOS/RHEL - å®‰è£…å¼€å‘å·¥å…·é›†
sudo yum groupinstall "Development Tools"
```

---

## ğŸŒ ç½‘ç»œé—®é¢˜

### Q: å®¢æˆ·ç«¯æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨
**A**: å¯èƒ½çš„åŸå› åŒ…æ‹¬æœåŠ¡å™¨æœªå¯åŠ¨ã€ç«¯å£è¢«å ç”¨ã€é˜²ç«å¢™é˜»æ­¢

**è¯Šæ–­æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
ps aux | grep duckchat-server

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
netstat -tlnp | grep 5001

# 3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
sudo ufw status  # Ubuntu
sudo firewall-cmd --list-all  # CentOS

# 4. æµ‹è¯•è¿æ¥
telnet localhost 5001
```

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥ç«¯å£é…ç½®æ˜¯å¦æ­£ç¡®
3. é…ç½®é˜²ç«å¢™å…è®¸ç«¯å£ 5001
4. æ£€æŸ¥ç½‘ç»œè¿æ¥

### Q: è¿æ¥é¢‘ç¹æ–­å¼€
**A**: ç½‘ç»œä¸ç¨³å®šæˆ–æœåŠ¡å™¨è´Ÿè½½è¿‡é«˜

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥ç½‘ç»œè´¨é‡
ping server_ip

# 2. æ£€æŸ¥æœåŠ¡å™¨èµ„æºä½¿ç”¨
top -p $(pgrep duckchat-server)

# 3. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—
tail -f /var/log/syslog | grep duckchat
```

### Q: æ¶ˆæ¯å‘é€å¤±è´¥
**A**: ç½‘ç»œä¸­æ–­æˆ–æœåŠ¡å™¨å¤„ç†å¼‚å¸¸

**è¯Šæ–­æ­¥éª¤**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€
2. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
3. é‡å¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨

---

## ğŸ’¾ æ•°æ®åº“é—®é¢˜

### Q: æ•°æ®åº“æ–‡ä»¶æ— æ³•åˆ›å»º
**A**: æƒé™ä¸è¶³æˆ–ç›®å½•ä¸å­˜åœ¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p ./data

# 2. è®¾ç½®æ­£ç¡®æƒé™
chmod 755 ./data

# 3. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
```

### Q: æ•°æ®åº“é”å®šé”™è¯¯
**A**: å¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®æ•°æ®åº“

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿åªæœ‰ä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹åœ¨è¿è¡Œ
2. æ£€æŸ¥æ˜¯å¦æœ‰åƒµå°¸è¿›ç¨‹
3. é‡å¯æ•°æ®åº“è¿æ¥

### Q: æ•°æ®æŸ¥è¯¢é€Ÿåº¦æ…¢
**A**: ç¼ºå°‘ç´¢å¼•æˆ–æ•°æ®é‡è¿‡å¤§

**è§£å†³æ–¹æ¡ˆ**:
```sql
-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_messages_chat_time ON messages(chat_id, sent_at DESC);
CREATE INDEX idx_users_username ON users(username);

-- æ¸…ç†æ—§æ•°æ®
DELETE FROM messages WHERE sent_at < datetime('now', '-30 days');
```

---

## ğŸ–¥ï¸ ç•Œé¢é—®é¢˜

### Q: ä¸­æ–‡æ˜¾ç¤ºä¹±ç 
**A**: å­—ç¬¦ç¼–ç è®¾ç½®ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. è®¾ç½®ç¯å¢ƒå˜é‡
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8

# 2. æ£€æŸ¥ç»ˆç«¯æ”¯æŒ
locale

# 3. é‡æ–°å¯åŠ¨å®¢æˆ·ç«¯
./client/client
```

### Q: ç•Œé¢æ˜¾ç¤ºå¼‚å¸¸æˆ–é—ªçƒ
**A**: ç»ˆç«¯å…¼å®¹æ€§é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥ç»ˆç«¯ç±»å‹
echo $TERM

# 2. è®¾ç½®å…¼å®¹çš„ç»ˆç«¯ç±»å‹
export TERM=xterm-256color

# 3. ä½¿ç”¨æ ‡å‡†ç»ˆç«¯
gnome-terminal -- xterm
```

### Q: æŒ‰é”®æ— å“åº”
**A**: è¾“å…¥æ¨¡å¼ä¸æ­£ç¡®æˆ–å¿«æ·é”®å†²çª

**è§£å†³æ–¹æ¡ˆ**:
1. æŒ‰ `ESC` é€€å‡ºå½“å‰æ¨¡å¼
2. æŒ‰ `:help` æŸ¥çœ‹å¸®åŠ©
3. æ£€æŸ¥ç»ˆç«¯å¿«æ·é”®è®¾ç½®

---

## âš¡ æ€§èƒ½é—®é¢˜

### Q: æœåŠ¡å™¨å“åº”æ…¢
**A**: ç³»ç»Ÿèµ„æºä¸è¶³æˆ–æ•°æ®åº“æŸ¥è¯¢æ•ˆç‡ä½

**è¯Šæ–­æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥CPUä½¿ç”¨
top -p $(pgrep duckchat-server)

# 2. æ£€æŸ¥å†…å­˜ä½¿ç”¨
ps aux | grep duckchat-server

# 3. æ£€æŸ¥ç£ç›˜I/O
iotop -p $(pgrep duckchat-server)
```

**ä¼˜åŒ–å»ºè®®**:
1. å¢åŠ ç³»ç»Ÿå†…å­˜
2. ä½¿ç”¨SSDå­˜å‚¨
3. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
4. å¢åŠ æœåŠ¡å™¨çº¿ç¨‹æ•°

### Q: å®¢æˆ·ç«¯å¡é¡¿
**A**: æ¸²æŸ“æ€§èƒ½é—®é¢˜æˆ–ç½‘ç»œå»¶è¿Ÿ

**è§£å†³æ–¹æ¡ˆ**:
1. å‡å°‘æ¶ˆæ¯å†å²æ˜¾ç¤ºæ•°é‡
2. æ£€æŸ¥ç½‘ç»œè¿æ¥è´¨é‡
3. å…³é—­å…¶ä»–å ç”¨èµ„æºçš„ç¨‹åº

---

## ğŸ”’ å®‰å…¨é—®é¢˜

### Q: ç™»å½•è®¤è¯å¤±è´¥
**A**: ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œæˆ–æ•°æ®åº“é—®é¢˜

**è¯Šæ–­æ­¥éª¤**:
1. æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®
2. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
3. æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·è¡¨

### Q: å¯†ç å“ˆå¸ŒéªŒè¯å¤±è´¥
**A**: åŠ å¯†ç®—æ³•ä¸åŒ¹é…æˆ–æ•°æ®æŸå

**è§£å†³æ–¹æ¡ˆ**:
1. é‡æ–°æ³¨å†Œç”¨æˆ·
2. æ£€æŸ¥åŠ å¯†åº“ç‰ˆæœ¬
3. éªŒè¯æ•°æ®åº“å®Œæ•´æ€§

---

## ğŸ› ï¸ è°ƒè¯•æŠ€å·§

### å¯ç”¨è°ƒè¯•æ¨¡å¼
```bash
# ç¼–è¯‘è°ƒè¯•ç‰ˆæœ¬
g++ -g -O0 -DDEBUG source.cpp -o debug_program

# ä½¿ç”¨ GDB è°ƒè¯•
gdb ./debug_program
(gdb) run
(gdb) backtrace
```

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```cpp
// åœ¨ä»£ç ä¸­æ·»åŠ è°ƒè¯•æ—¥å¿—
log(LogLevel::DEBUG, "è°ƒè¯•ä¿¡æ¯: " + variable);
```

### å†…å­˜æ£€æŸ¥
```bash
# ä½¿ç”¨ Valgrind æ£€æŸ¥å†…å­˜æ³„æ¼
valgrind --leak-check=full ./duckchat-server

# ä½¿ç”¨ AddressSanitizer
g++ -fsanitize=address -g source.cpp -o program
./program
```

---

## ğŸ“ è·å–å¸®åŠ©

### è‡ªåŠ©èµ„æº
1. **æŸ¥çœ‹æ—¥å¿—**: æ£€æŸ¥æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ—¥å¿—æ–‡ä»¶
2. **é‡å¯æœåŠ¡**: å°è¯•é‡å¯æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
3. **æ£€æŸ¥é…ç½®**: ç¡®è®¤ç½‘ç»œå’Œæ•°æ®åº“é…ç½®æ­£ç¡®

### ç¤¾åŒºæ”¯æŒ
- [GitHub Issues](https://github.com/laipuran/DuckChat/issues) - æŠ¥å‘Šé—®é¢˜å’Œè¯·æ±‚å¸®åŠ©
- [é¡¹ç›®æ–‡æ¡£](docs/README.md) - æŸ¥çœ‹å®Œæ•´æ–‡æ¡£
- [å¼€å‘æŒ‡å—](docs/06-å¼€å‘æŒ‡å—.md) - å¼€å‘ç›¸å…³é—®é¢˜

### æŠ¥å‘Šé—®é¢˜æ—¶è¯·æä¾›
1. **æ“ä½œç³»ç»Ÿä¿¡æ¯**: `uname -a`
2. **ç¼–è¯‘å™¨ç‰ˆæœ¬**: `g++ --version`
3. **é”™è¯¯ä¿¡æ¯**: å®Œæ•´çš„é”™è¯¯æ—¥å¿—
4. **é‡ç°æ­¥éª¤**: è¯¦ç»†çš„é—®é¢˜é‡ç°æ­¥éª¤
5. **ç³»ç»Ÿé…ç½®**: ç›¸å…³çš„é…ç½®æ–‡ä»¶å†…å®¹

---

## ğŸ”® é¢„é˜²æªæ–½

### å®šæœŸç»´æŠ¤
```bash
# 1. æ¸…ç†æ—¥å¿—æ–‡ä»¶
find ./logs -name "*.log" -mtime +7 -delete

# 2. å¤‡ä»½æ•°æ®åº“
sqlite3 ./data/duckchat.db ".backup backup.db"

# 3. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
```

### ç›‘æ§å»ºè®®
1. **ç³»ç»Ÿç›‘æ§**: ä½¿ç”¨ `top`ã€`htop` ç›‘æ§èµ„æºä½¿ç”¨
2. **ç½‘ç»œç›‘æ§**: ä½¿ç”¨ `netstat` ç›‘æ§è¿æ¥çŠ¶æ€
3. **æ—¥å¿—ç›‘æ§**: ä½¿ç”¨ `tail -f` å®æ—¶æŸ¥çœ‹æ—¥å¿—

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„](docs/01-ç³»ç»Ÿæ¶æ„.md) - äº†è§£ç³»ç»Ÿè®¾è®¡
- [é€šä¿¡åè®®](docs/02-é€šä¿¡åè®®.md) - ç†è§£é€šä¿¡æœºåˆ¶
- [æ•°æ®åº“è®¾è®¡](docs/03-æ•°æ®åº“è®¾è®¡.md) - æ•°æ®å­˜å‚¨ç»“æ„
- [å¼€å‘æŒ‡å—](docs/06-å¼€å‘æŒ‡å—.md) - å¼€å‘ç¯å¢ƒæ­å»º
- [éƒ¨ç½²è¯´æ˜](docs/07-éƒ¨ç½²è¯´æ˜.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

---

**æœ€åæ›´æ–°**: 2025-12-25  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**ç»´æŠ¤è€…**: DuckChat Team

å¦‚æœæœ¬æ–‡æ¡£æ²¡æœ‰è§£å†³æ‚¨çš„é—®é¢˜ï¼Œè¯·é€šè¿‡ [GitHub Issues](https://github.com/laipuran/DuckChat/issues) è”ç³»æˆ‘ä»¬ã€‚